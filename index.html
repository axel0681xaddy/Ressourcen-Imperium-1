<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ressourcen-Imperium</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" type="image/png" href="assets/icons/favicon.png">
    <!-- Lade Schriftarten vorab -->
    <link rel="preload" href="assets/fonts/game-font.woff2" as="font" type="font/woff2" crossorigin>
</head>
<body>
    <!-- Hauptcontainer -->
    <div id="game-container">
        <!-- Header-Bereich -->
        <header id="game-header">
            <h1>Ressourcen-Imperium</h1>
            <div id="top-bar">
                <div id="prestige-info">
                    <span>Prestige Level: </span>
                    <span id="prestige-level">0</span>
                </div>
                <div id="menu-buttons">
                    <button id="settings-button" class="icon-button" title="Einstellungen">
                        <img src="assets/icons/settings.png" alt="Einstellungen">
                    </button>
                    <button id="save-button" class="icon-button" title="Spiel speichern">
                        <img src="assets/icons/save.png" alt="Speichern">
                    </button>
                </div>
            </div>
        </header>

        <!-- Hauptspielbereich -->
        <main id="game-content">
            <!-- Ressourcen-Bereich -->
            <section id="resources-section" class="game-section">
                <h2>Ressourcen</h2>
                <div id="resources-container" class="grid-container">
                    <!-- Ressourcen werden dynamisch eingefügt -->
                </div>
            </section>

            <!-- Upgrade-Bereich -->
            <section id="upgrades-section" class="game-section">
                <h2>Verbesserungen</h2>
                <div id="upgrades-container" class="grid-container">
                    <!-- Upgrades werden dynamisch eingefügt -->
                </div>
            </section>

            <!-- Achievement-Bereich -->
            <section id="achievements-section" class="game-section">
                <h2>Erfolge</h2>
                <div id="achievements-container" class="grid-container">
                    <!-- Achievements werden dynamisch eingefügt -->
                </div>
            </section>

            <!-- Statistik-Bereich -->
            <section id="statistics-section" class="game-section">
                <h2>Statistiken</h2>
                <div id="statistics-container">
                    <!-- Statistiken werden dynamisch eingefügt -->
                </div>
            </section>
        </main>

        <!-- Benachrichtigungsbereich -->
        <div id="notifications-container"></div>

        <!-- Modaler Dialog für Einstellungen -->
        <div id="settings-modal" class="modal">
            <div class="modal-content">
                <h2>Einstellungen</h2>
                <div id="settings-container">
                    <div class="settings-group">
                        <h3>Allgemein</h3>
                        <div class="setting-item">
                            <label for="setting-autosave">Automatisches Speichern</label>
                            <input type="checkbox" id="setting-autosave" checked>
                        </div>
                        <div class="setting-item">
                            <label for="setting-offline-progress">Offline-Fortschritt</label>
                            <input type="checkbox" id="setting-offline-progress" checked>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Audio</h3>
                        <div class="setting-item">
                            <label for="setting-sound">Soundeffekte</label>
                            <input type="checkbox" id="setting-sound" checked>
                        </div>
                        <div class="setting-item">
                            <label for="setting-volume">Lautstärke</label>
                            <input type="range" id="setting-volume" min="0" max="100" value="50">
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Grafik</h3>
                        <div class="setting-item">
                            <label for="setting-particles">Partikeleffekte</label>
                            <input type="checkbox" id="setting-particles" checked>
                        </div>
                        <div class="setting-item">
                            <label for="setting-animations">Animationen</label>
                            <input type="checkbox" id="setting-animations" checked>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Spielstand</h3>
                        <div class="setting-buttons">
                            <button id="export-save">Spielstand exportieren</button>
                            <button id="import-save">Spielstand importieren</button>
                            <button id="reset-game" class="danger-button">Spiel zurücksetzen</button>
                        </div>
                    </div>
                </div>
                <button id="close-settings" class="close-button">Schließen</button>
            </div>
        </div>

        <!-- Modaler Dialog für Prestige -->
        <div id="prestige-modal" class="modal">
            <div class="modal-content">
                <h2>Prestige</h2>
                <p>Möchtest du wirklich ein Prestige durchführen? Du erhältst folgende Boni:</p>
                <div id="prestige-bonuses"></div>
                <div class="modal-buttons">
                    <button id="confirm-prestige">Bestätigen</button>
                    <button id="cancel-prestige">Abbrechen</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio-Elemente -->
    <audio id="sound-click" preload="auto" src="assets/sounds/click.mp3"></audio>
    <audio id="sound-upgrade" preload="auto" src="assets/sounds/upgrade.mp3"></audio>
    <audio id="sound-achievement" preload="auto" src="assets/sounds/achievement.mp3"></audio>
    <audio id="sound-error" preload="auto" src="assets/sounds/error.mp3"></audio>

    <!-- Lade Scripts -->
    <script type="module" src="js/app.js"></script>

    <!-- Entwickler-Tools (nur im Debug-Modus) -->
    <div id="dev-tools" style="display: none;">
        <div id="fps-counter"></div>
        <div id="debug-info"></div>
    </div>

    <!-- Lade Service Worker für PWA-Support -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(err => {
                        console.log('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>
</body>
</html>
